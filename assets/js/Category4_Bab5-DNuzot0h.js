import{b as A,r as n,j as a,m as i,A as v,R as I}from"./vendor-BjgPdEnQ.js";/* empty css                  */import"./react-confetti-ho-PuuYM.js";import"./game-DMqPqpoE.js";import{j as D}from"./guru-D7H-5Pkh.js";const d=[{id:1,title:"Level 1",description:"Data dan Pengukuran",icon:"üìä",color:"#E91E63",gradient:"linear-gradient(135deg, #E91E63, #F48FB1)",subChapters:[{id:1,title:"Apa Itu Segibanyak?",icon:"üìù"},{id:2,title:" Segitiga: Bangun Tiga Sisi yang Seru!",icon:"üìà"},{id:3,title:"Segiempat Bangun Empat Sisi yang Menarik",icon:"üîç"}],games:[{id:1,title:"Yuk Coba Gamenya!",path:"/game/kelas4/Bab5/level1",icon:"üéÆ"}]}];function R(){const l=A(),[t,h]=n.useState(null),[N,u]=n.useState(!1),[H,k]=n.useState({}),[z,b]=n.useState([]),[f,m]=n.useState(!1),[S,x]=n.useState(!1),[w,B]=n.useState({}),L=Array.from({length:50},(e,s)=>({id:s,size:Math.random()*3+1,left:Math.random()*100,top:Math.random()*100,delay:Math.random()*5,duration:Math.random()*3+2})),M=Array.from({length:6},(e,s)=>({id:s,size:Math.random()*150+100,left:Math.random()*100,top:Math.random()*20+10,speed:Math.random()*100+50,delay:Math.random()*20})),C=async()=>{try{const e=JSON.parse(localStorage.getItem("userData"));if(!e||!e.id_siswa)return;const s={};for(const o of d){const c=await D(4,5,o.id);s[o.id]=(c==null?void 0:c.status_selesai)||!1}B(s)}catch(e){console.error("Error checking level completion:",e)}};n.useEffect(()=>{if(!(localStorage.getItem("isLoggedIn")==="true")){l("/login");return}const s=JSON.parse(localStorage.getItem("selectedAvatar"));if(s){const c=`avatar_${s.name}_levels_progress`,j=JSON.parse(localStorage.getItem(c))||{};k(j);const E=d.filter(r=>{var y;return!r.locked&&((y=j[`level_${r.id}`])==null?void 0:y.completed)}).map(r=>r.id);b(E)}const o=setTimeout(()=>{x(!0)},3e3);return C(),()=>{clearTimeout(o)}},[l]);const T=e=>{if(e.locked){alert("Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.");return}m(!0),h(e),u(!0),x(!1)},g=()=>{u(!1),setTimeout(()=>{h(null),m(!1)},300)},_=e=>{e.title==="Apa Itu Segibanyak?"?l("/materi/materikelas4/materiBab5_1"):e.title===" Segitiga: Bangun Tiga Sisi yang Seru!"?l("/materi/materikelas4/materiBab5_2"):e.title==="Segiempat Bangun Empat Sisi yang Menarik"?l("/materi/materikelas4/materiBab5_3"):l(`/materi/materikelas4/materiBab5_${e.id}`)},P=e=>{l(e.path)},$=()=>{m(!0),setTimeout(()=>{l("/kelas4")},500)},p=e=>w[e]||!1;return a.jsxs("div",{className:`category-container ${f?"animate-bg":""}`,children:[a.jsxs("div",{className:"background-elements",children:[L.map(e=>a.jsx("div",{className:"star",style:{width:e.size+"px",height:e.size+"px",left:e.left+"%",top:e.top+"%",animationDelay:e.delay+"s",animationDuration:e.duration+"s"}},`star-${e.id}`)),M.map(e=>a.jsx("div",{className:"cloud",style:{width:e.size+"px",height:e.size/2+"px",left:e.left+"%",top:e.top+"%",animationDuration:e.speed+"s",animationDelay:e.delay+"s"}},`cloud-${e.id}`))]})," ",a.jsxs("header",{className:"header animated-header",children:[a.jsxs(i.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:["BAB 5 ",a.jsx("span",{className:"wave",children:"üìä"})]}),a.jsx(i.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.6},className:"header-tagline",children:"Belajar data dan pengukuran bersama!"})]}),a.jsxs("section",{className:"categories-section",children:[" ",a.jsxs(i.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[a.jsx("span",{className:"category-icon",children:"üìä"})," Bab 5: Data dan Pengukuran"]}),a.jsx(i.button,{className:"back-button",onClick:$,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:"Kembali"}),a.jsx(v,{children:S&&a.jsxs(i.div,{className:"hint-bubble",initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},children:[a.jsx("div",{className:"hint-arrow"}),a.jsx("p",{children:"Klik kartu level untuk mulai belajar!"})]})}),a.jsx("div",{className:"level-path",children:d.map((e,s)=>a.jsxs(I.Fragment,{children:[s>0&&a.jsx("div",{className:"path-connector"}),a.jsx("div",{className:`path-node ${e.locked?"locked-node":""}`,children:e.id})]},`path-${e.id}`))}),a.jsx("div",{className:"level-grid",children:d.map(e=>a.jsxs(i.div,{className:`level-card ${e.locked?"level-locked":""}`,onClick:()=>T(e),whileHover:e.locked?{}:{scale:1.05,y:-5},whileTap:e.locked?{}:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*e.id},style:{boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)"},children:[a.jsxs("div",{className:`level-icon-circle ${p(e.id)?"completed":""}`,style:{background:e.gradient},children:[e.locked&&a.jsx("div",{className:"lock-overlay",children:"üîí"}),p(e.id)&&a.jsx("div",{className:"completed-check",children:"‚úì"}),a.jsx("span",{className:"level-symbol",children:e.icon})]}),a.jsx("h3",{className:"level-title",children:e.title}),a.jsx("p",{className:"level-description",children:e.description}),a.jsxs("div",{className:"level-info",children:[a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üìö"})," ",e.subChapters.length," Sub Bab"]}),a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üéÆ"})," ",e.games.length," Game"]})]}),a.jsx("div",{className:"level-badge",style:{background:e.color},children:e.id})]},e.id))})]}),a.jsx(v,{children:N&&t&&a.jsx(i.div,{className:"popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:g,children:a.jsxs(i.div,{className:"level-popup",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25},style:{background:"linear-gradient(to bottom right, white, #f9f9f9)",borderTop:`5px solid ${t.color}`},onClick:e=>e.stopPropagation(),children:[a.jsx(i.button,{className:"close-popup",onClick:g,initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.1},whileTap:{scale:.9},transition:{duration:.3,type:"spring",stiffness:300},children:"‚úï"}),a.jsxs("div",{className:"popup-header",style:{background:t.gradient},children:[a.jsx("div",{className:"popup-level-icon",children:t.icon}),a.jsxs("h2",{children:["Level ",t.id,": ",t.title]})]}),a.jsxs("div",{className:"popup-sections",children:[a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üìö"}),"Sub-Bab Materi"]}),a.jsx("div",{className:"sub-chapter-list",children:t.subChapters.map(e=>a.jsxs(i.div,{className:"sub-chapter-item",onClick:()=>_(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"sub-chapter-icon",children:e.icon}),a.jsxs("div",{className:"sub-chapter-content",children:[a.jsx("div",{className:"sub-chapter-number",children:e.id}),a.jsx("h4",{children:e.title})]}),a.jsx("div",{className:"sub-chapter-arrow",children:"‚Üí"})]},e.id))})]}),a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üéÆ"}),"Game Latihan"]}),a.jsx("div",{className:"game-list",children:t.games.map(e=>a.jsxs(i.div,{className:"game-item",onClick:()=>P(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"game-icon",children:e.icon}),a.jsxs("div",{className:"game-content",children:[a.jsx("h4",{children:e.title}),a.jsx("span",{className:"game-label",children:"Main Sekarang"})]}),a.jsx("div",{className:"game-arrow",children:"‚Üí"})]},e.id))})]})]}),a.jsx("div",{className:"popup-footer",children:p(t.id)?a.jsxs("div",{className:"level-status completed-status",children:[a.jsx("span",{className:"status-icon",children:"‚úì"})," Level Selesai"]}):a.jsxs("div",{className:"level-status",children:[a.jsx("span",{className:"status-icon",children:"‚è≥"})," Belum Selesai"]})})]})})})]})}export{R as default};
