import{b as Q,h as k,r,j as s,m as I}from"./vendor-BjgPdEnQ.js";import{R as B}from"./react-confetti-ho-PuuYM.js";import"./game-C_1TzDD9.js";/* empty css                    */const _=()=>{const v=Q(),c=k(),[d,N]=r.useState(0),[g,A]=r.useState(0),[C,S]=r.useState(!1),[x,M]=r.useState([]),[h,b]=r.useState(null),[E,w]=r.useState(null),[$,q]=r.useState("Bab 0 Level 1 Penjumlahan"),m=5;r.useEffect(()=>{const e=c.pathname.split("/");let t=0,n=0;c.state&&c.state.babIndex!==void 0?(t=c.state.babIndex,n=c.state.levelIndex||0):e.length>=4&&(t=parseInt(e[e.length-2])||0,n=parseInt(e[e.length-1])||0);const o=new URLSearchParams(c.search),u=o.get("chapter"),i=o.get("level");u!==null&&i!==null&&(t=parseInt(u),n=parseInt(i)),q(`Bab ${t+1} Level ${n+1} Penjumlahan`);const l=`bab${t}_level${n}`;localStorage.setItem("currentLevelKey",l);const a=localStorage.getItem("selectedAvatar");if(a){const j=`avatar_${JSON.parse(a).name}_operations`,y=JSON.parse(localStorage.getItem(j))||{};y[l]="addition",localStorage.setItem(j,JSON.stringify(y)),localStorage.setItem("currentOperation","addition")}},[c]),r.useEffect(()=>{const e=[];for(let t=0;t<m;t++){const n=Math.floor(Math.random()*20)+1,o=Math.floor(Math.random()*10)+1,u=n+o;let i=[];for(;i.length<3;){const a=Math.floor(Math.random()*40)+1;a!==u&&!i.includes(a)&&i.push(a)}const l=[u,...i];for(let a=l.length-1;a>0;a--){const p=Math.floor(Math.random()*(a+1));[l[a],l[p]]=[l[p],l[a]]}e.push({num1:n,num2:o,correctAnswer:u,options:l})}M(e)},[]);const L=e=>{b(e);const t=e===x[d].correctAnswer;w(t),t&&h!==e?(S(!0),A(g+1),new Audio("/src/assets/ding.mp3").play().catch(o=>console.log("Audio play failed:",o))):!t&&h!==e&&new Audio("/src/assets/fail.mp3").play().catch(o=>console.log("Audio play failed:",o)),setTimeout(()=>{S(!1)},2e3)},P=()=>{b(null),w(null),d<m-1?N(d+1):v(`/hasil/${g}`,{state:{score:g,totalQuestions:m}})};if(x.length===0)return s.jsx("div",{className:"loading",children:"Loading..."});const f=x[d];return s.jsxs("div",{className:"game-container",style:{backgroundColor:"#FF5722"},children:[C&&s.jsx(B,{recycle:!1}),s.jsx("div",{className:"close-button",children:s.jsx("button",{onClick:()=>v("/category"),children:"Ã—"})}),s.jsxs("div",{className:"question-section",children:[s.jsx("h1",{className:"game-title",style:{color:"white",fontSize:"1.5rem",marginBottom:"10px"},children:$}),s.jsxs("h2",{className:"question-count",children:["Pertanyaan ",d+1," dari ",m]}),s.jsx("div",{className:"question-text",children:s.jsxs("h1",{children:[f.num1,"+",f.num2,"=?"]})}),s.jsx("div",{className:"answer-options",children:f.options.map((e,t)=>s.jsx(I.button,{className:`answer-button ${h===e?e===f.correctAnswer?"correct":"incorrect":""}`,onClick:()=>L(e),whileHover:{scale:1.1},whileTap:{scale:.9},children:e},t))}),s.jsx("div",{className:"next-btn-container",children:s.jsx(I.button,{className:`next-button ${h===null?"disabled":""}`,onClick:P,disabled:h===null,children:"Pertanyaan Selanjutnya"})})]})]})};export{_ as default};
