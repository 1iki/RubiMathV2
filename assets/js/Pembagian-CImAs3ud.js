import{b as M,h as k,r as c,j as s,m as I}from"./vendor-BjgPdEnQ.js";import{R as F}from"./react-confetti-ho-PuuYM.js";import"./game-DMqPqpoE.js";/* empty css                    */const J=()=>{const g=M(),i=k(),[u,w]=c.useState(0),[f,A]=c.useState(0),[C,b]=c.useState(!1),[p,q]=c.useState([]),[h,S]=c.useState(null),[B,j]=c.useState(null),[$,L]=c.useState("Bab 3 Level 1 Pembagian"),m=5;c.useEffect(()=>{const e=i.pathname.split("/");let t=0,n=0;i.state&&i.state.babIndex!==void 0?(t=i.state.babIndex,n=i.state.levelIndex||0):e.length>=4&&(t=parseInt(e[e.length-2])||0,n=parseInt(e[e.length-1])||0);const o=new URLSearchParams(i.search),d=o.get("chapter"),a=o.get("level");d!==null&&a!==null&&(t=parseInt(d),n=parseInt(a)),L(`Bab ${t+1} Level ${n+1} Pembagian`);const l=`bab${t}_level${n}`;localStorage.setItem("currentLevelKey",l);const r=localStorage.getItem("selectedAvatar");if(r){const N=`avatar_${JSON.parse(r).name}_operations`,y=JSON.parse(localStorage.getItem(N))||{};y[l]="division",localStorage.setItem(N,JSON.stringify(y)),localStorage.setItem("currentOperation","division")}},[i]),c.useEffect(()=>{const e=[];for(let t=0;t<m;t++){const n=Math.floor(Math.random()*10)+2,o=Math.floor(Math.random()*12)+1,d=n*o,a=o;let l=[a,a*2,(a+.05).toFixed(2),(a+.01).toFixed(2)];for(let r=l.length-1;r>0;r--){const x=Math.floor(Math.random()*(r+1));[l[r],l[x]]=[l[x],l[r]]}e.push({dividend:d,divisor:n,correctAnswer:a,options:l})}q(e)},[]);const P=e=>{const t=parseFloat(e),n=p[u].correctAnswer;S(t);const o=t===n;j(o),o&&h!==t?(b(!0),A(f+1),new Audio("/src/assets/ding.mp3").play().catch(a=>console.log("Audio play failed:",a))):!o&&h!==t&&new Audio("/src/assets/fail.mp3").play().catch(a=>console.log("Audio play failed:",a)),setTimeout(()=>{b(!1)},2e3)},Q=()=>{S(null),j(null),u<m-1?w(u+1):g(`/hasil/${f}`,{state:{score:f,totalQuestions:m}})};if(p.length===0)return s.jsx("div",{className:"loading",children:"Loading..."});const v=p[u];return s.jsxs("div",{className:"game-container",style:{backgroundColor:"#4CD137"},children:[C&&s.jsx(F,{recycle:!1}),s.jsx("div",{className:"close-button",children:s.jsx("button",{onClick:()=>g("/category"),children:"Ã—"})}),s.jsxs("div",{className:"question-section",children:[s.jsxs("h2",{className:"question-count",children:["Pertanyaan ",u+1," dari ",m]}),s.jsx("div",{className:"question-text",children:s.jsxs("h1",{children:[v.dividend,"/",v.divisor,"=?"]})}),s.jsx("div",{className:"answer-options",children:v.options.map((e,t)=>s.jsx(I.button,{className:`answer-button circle-button ${h===parseFloat(e)?parseFloat(e)===v.correctAnswer?"correct":"incorrect":""}`,onClick:()=>P(e),whileHover:{scale:1.1},whileTap:{scale:.9},children:e},t))}),s.jsx("div",{className:"next-btn-container",children:s.jsx(I.button,{className:`next-button ${h===null?"disabled":""}`,onClick:Q,disabled:h===null,children:"Pertanyaan Selanjutnya"})})]}),s.jsx("div",{className:"title-section",children:s.jsx("h1",{children:$})})]})};export{J as default};
