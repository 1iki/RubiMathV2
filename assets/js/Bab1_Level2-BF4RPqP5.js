import{b as de,r as n,j as e}from"./vendor-BjgPdEnQ.js";/* empty css               */import{u as ue}from"./game-DMqPqpoE.js";import{m as he}from"./guru-D7H-5Pkh.js";function Ce(){const S=de(),{user:k,loading:M}=ue();if(n.useEffect(()=>{!M&&!k&&S("/login")},[k,M,S]),M)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-200 p-4 flex items-center justify-center",children:e.jsx("div",{className:"text-2xl font-bold text-gray-700",children:"Loading..."})});if(!k)return null;const[w,v]=n.useState(0),[h,B]=n.useState("composition"),[U,P]=n.useState(0),[ge,fe]=n.useState(10),[p,_]=n.useState(0),[g,K]=n.useState(0),[C,T]=n.useState(!1),[N,I]=n.useState(!1),[pe,xe]=n.useState(""),[V,G]=n.useState(!1),[W,O]=n.useState(!1),[X,q]=n.useState(!1),[Z,z]=n.useState(!1),[x,E]=n.useState(!1),[A,j]=n.useState({message:"",isCorrect:null}),[$,y]=n.useState({message:"",isCorrect:null}),[f,ee]=n.useState([]),[d,te]=n.useState([]),[J,R]=n.useState({composition:0,subtraction:0});n.useEffect(()=>{L()},[]);const L=()=>{const t=[];for(let s=0;s<5;s++){const o=Math.floor(Math.random()*9e3)+1e3,l=Math.floor(o/1e3),c=Math.floor(o%1e3/100),m=Math.floor(o%100/10),i=o%10,r=`${o}`,u=b(l,c,m,i),Q=se(l,c,m,i);t.push({number:o,question:r,correctAnswer:u,options:Q})}const a=[];for(let s=0;s<5;s++){const o=Math.floor(Math.random()*900)+100,l=Math.floor(Math.random()*o),c=o-l,m=[];for(;m.length<3;){const r=c+(Math.floor(Math.random()*20)-10);r!==c&&r>=0&&!m.includes(r)&&m.push(r)}const i=[c,...m];for(let r=i.length-1;r>0;r--){const u=Math.floor(Math.random()*(r+1));[i[r],i[u]]=[i[u],i[r]]}a.push({num1:o,num2:l,correctAnswer:c,options:i})}ee(t),te(a)},b=(t,a,s,o)=>{let l="";return t>0&&(l+=`${t} ribu `),a>0&&(l+=`${a} ratus `),s>0&&(l+=`${s} puluh `),(o>0||t===0&&a===0&&s===0)&&(l+=`${o}`),l.trim()},se=(t,a,s,o)=>{const l=b(t,a,s,o),c=[];c.push(b(t,a,o,s)),c.push(b(a,t,s,o)),c.push(b(t+1,a,s,o-1));const m=[...new Set([l,...c])];for(;m.length<4;){const r=Math.max(0,t+Math.floor(Math.random()*3)-1),u=Math.max(0,a+Math.floor(Math.random()*3)-1),Q=Math.max(0,s+Math.floor(Math.random()*3)-1),me=Math.max(0,o+Math.floor(Math.random()*3)-1),F=b(r,u,Q,me);m.includes(F)||m.push(F)}const i=[...m];for(let r=i.length-1;r>0;r--){const u=Math.floor(Math.random()*(r+1));[i[r],i[u]]=[i[u],i[r]]}return i.slice(0,4)},D=()=>{j({message:"",isCorrect:null}),y({message:"",isCorrect:null}),P(U+1),h==="composition"?(B("subtraction"),q(!0)):h==="subtraction"&&(z(!0),E(!0))},ae=()=>{B("composition"),P(0),q(!1),z(!1),E(!1),_(0),K(0),v(0),L()},ne=t=>{if(C)return;const a=f[p];t===a.correctAnswer?(j({message:"Benar! 🎉",isCorrect:!0}),v(s=>s+10),R(s=>({...s,composition:s.composition+1})),Y(),H()):j({message:`Salah! Jawaban yang benar: ${a.correctAnswer}`,isCorrect:!1}),T(!0)},oe=()=>{if(!C){j({message:"Anda harus menjawab pertanyaan terlebih dahulu!",isCorrect:!1});return}p<f.length-1?(_(p+1),j({message:"",isCorrect:null}),T(!1)):D()},re=t=>{if(N)return;const a=d[g];t===a.correctAnswer?(y({message:"Benar! 🎉",isCorrect:!0}),v(s=>s+10),R(s=>({...s,subtraction:s.subtraction+1})),Y(),H()):y({message:`Salah! Jawaban yang benar: ${a.correctAnswer}`,isCorrect:!1}),I(!0)},ie=()=>{if(!N){y({message:"Anda harus menjawab pertanyaan terlebih dahulu!",isCorrect:!1});return}g<d.length-1?(K(g+1),y({message:"",isCorrect:null}),I(!1)):D()},Y=()=>{G(!0),setTimeout(()=>{G(!1)},500)},H=()=>{O(!0),setTimeout(()=>{O(!1)},1500)},le=()=>{S("/category4_bab1")},ce=async()=>{const t={kelas:4,bab:1,level:2,jenis_permainan:"Komposisi dan Pengurangan Bilangan Cacah",skor:w,skor_maksimal:100,status_selesai:x,detail_jawaban:{jawaban:[{bagian:"composition",total_benar:J.composition,total_soal:f.length},{bagian:"subtraction",total_benar:J.subtraction,total_soal:d.length}]}};await he(t)};return n.useEffect(()=>{(w>0||x)&&ce()},[w,x]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-200 p-4",children:[e.jsxs("div",{className:"max-w-3xl mx-auto bg-white p-6 md:p-8 rounded-2xl shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-center gap-4",children:e.jsx("h1",{className:"text-3xl font-bold text-pink-500",children:h==="composition"?"Komposisi Bilangan Cacah":"Pengurangan Bilangan Cacah"})}),e.jsx("p",{className:"text-gray-700 text-lg mb-6",children:h==="composition"?"Ayo mengenal komposisi bilangan cacah sampai 10.000!":"Ayo berlatih pengurangan bilangan cacah sampai 1.000!"}),e.jsxs("div",{className:"flex justify-between items-center mb-6 bg-gray-100 rounded-full p-2",children:[e.jsxs("div",{className:`px-4 py-2 rounded-full text-center transition-all ${h==="composition"||X?"bg-pink-400 text-white":"bg-gray-200"}`,style:{flex:1},children:[e.jsx("i",{className:"fas fa-puzzle-piece mr-2"})," Komposisi"]}),e.jsxs("div",{className:`px-4 py-2 rounded-full text-center transition-all ${h==="subtraction"||Z?"bg-pink-400 text-white":"bg-gray-200"}`,style:{flex:1},children:[e.jsx("i",{className:"fas fa-minus mr-2"})," Pengurangan"]})]}),x&&e.jsxs("div",{className:"game-section animate-fadeIn text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:[e.jsx("i",{className:"fas fa-trophy text-yellow-300"})," Selamat!"]}),e.jsx("p",{className:"text-xl mb-4",children:"Kamu telah menyelesaikan semua permainan!"}),e.jsx("div",{className:"mb-6 py-4 px-6 bg-green-100 rounded-lg shadow inline-block",children:e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["Skor Akhir: ",w]})}),e.jsx("button",{className:"bg-gradient-to-r from-pink-500 to-pink-400 text-white px-6 py-3 rounded-full shadow-md hover:translate-y-1 transform transition-all font-bold",onClick:ae,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-redo"})," Main Lagi"]})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"bg-gray-100 text-gray-700 px-5 py-2 rounded-full shadow hover:shadow-md transition-all",onClick:le,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-home"})," Kembali ke Kategori"]})})})]}),!x&&h==="composition"&&f.length>0&&e.jsxs("div",{className:"game-section animate-fadeIn",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:[e.jsx("i",{className:"fas fa-puzzle-piece"})," Komposisi Bilangan Cacah"]}),e.jsx("div",{className:"text-3xl font-bold my-5 p-5 bg-gray-50 rounded-xl inline-block shadow",children:f[p].question}),e.jsx("p",{className:"mb-4",children:"Bagaimana komposisi bilangan di atas?"}),e.jsx("div",{className:"flex flex-col gap-2 mb-4",children:f[p].options.map((t,a)=>e.jsx("button",{className:`bg-gradient-to-r from-teal-500 to-teal-400 text-white px-5 py-3 rounded-lg shadow hover:shadow-lg transition-all my-1 ${C&&t===f[p].correctAnswer?"border-2 border-green-700":""}`,onClick:()=>ne(t),disabled:C,children:t},a))}),A.message&&e.jsx("div",{className:`p-4 rounded-lg shadow my-4 ${A.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:A.message}),e.jsx("button",{className:"bg-gradient-to-r from-pink-500 to-pink-400 text-white px-6 py-3 rounded-full shadow-md hover:shadow-lg transition-all font-bold",onClick:oe,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-right"})," ",p<f.length-1?"Soal Selanjutnya":"Lanjut ke Pengurangan"]})})]}),!x&&h==="subtraction"&&d.length>0&&e.jsxs("div",{className:"game-section animate-fadeIn",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:[e.jsx("i",{className:"fas fa-minus"})," Pengurangan Bilangan Cacah"]}),e.jsxs("div",{className:"text-2xl my-5 p-5 bg-gray-50 rounded-xl inline-block shadow",children:[d[g].num1," - ",d[g].num2," = ?"]}),e.jsx("p",{className:"mb-4",children:"Berapakah hasil pengurangan di atas?"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-4",children:d[g].options.map((t,a)=>e.jsx("button",{className:`bg-gradient-to-r from-teal-500 to-teal-400 text-white px-5 py-3 rounded-lg shadow hover:shadow-lg transition-all ${N&&t===d[g].correctAnswer?"border-2 border-green-700":""}`,onClick:()=>re(t),disabled:N,children:t},a))}),$.message&&e.jsx("div",{className:`p-4 rounded-lg shadow my-4 ${$.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:$.message}),e.jsx("button",{className:"bg-gradient-to-r from-pink-500 to-pink-400 text-white px-6 py-3 rounded-full shadow-md hover:shadow-lg transition-all font-bold",onClick:ie,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-right"})," ",g<d.length-1?"Soal Selanjutnya":"Selesai"]})})]}),e.jsxs("div",{className:"my-5 font-bold text-xl inline-block px-5 py-2 bg-yellow-300 rounded-full text-gray-800 shadow",children:["⭐ Skor: ",w]}),e.jsx("img",{src:"/src/assets/kelinci.png",alt:"Character",className:`absolute w-24 bottom-5 right-5 transition-all duration-500 ${V?"transform -translate-y-12":""}`}),W&&e.jsx("div",{className:"confetti-container",children:[...Array(50)].map((t,a)=>{const s=Math.random()*100,o=Math.random()*100,l=Math.random()*10+5,c=`hsl(${Math.random()*360}, 100%, 50%)`,m=`translate(${Math.random()*200-100}px, ${Math.random()*200}px) rotate(${Math.random()*360}deg)`,i=Math.random()*1+.5;return e.jsx("div",{className:"absolute w-3 h-3 opacity-100 transition-all",style:{left:`${s}%`,top:`${o}%`,width:`${l}px`,height:`${l}px`,backgroundColor:c,transform:m,transition:`all ${i}s ease-out`}},a)})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-fadeIn {
          animation: fadeIn 0.5s ease;
        }
      `})]})}export{Ce as default};
