import{b as R,r as l,j as a,m as t,A as N,R as I}from"./vendor-BjgPdEnQ.js";/* empty css                  */import{R as z}from"./react-confetti-ho-PuuYM.js";import"./game-C_1TzDD9.js";import{j as O}from"./guru-BwvXGu2s.js";const o=[{id:1,title:"Level 1",description:"Pengenalan Operasi Hitung",icon:"üîç",color:"#4E6BFF",gradient:"linear-gradient(135deg, #4E6BFF, #8393FF)",subChapters:[{id:1,title:"Pembilang Satu",icon:"üìù"},{id:2,title:"Menyebut Pecahan Yang Penyebutnya Sama",icon:"üìä"}],games:[{id:1,title:"Permainan Mencari Pecahan Dan Pembilang",path:"/game/kelas4/bab2/level1",icon:"üé≤"}]},{id:2,title:"Level 2",description:"Pengukuran & Pola",icon:"üìè",color:"#FF5733",gradient:"linear-gradient(135deg, #FF5733, #FF9A7A)",subChapters:[{id:3,title:"Mengurutkan dan Membandingkan Pecahan",icon:"üß©"},{id:4,title:"Pecahan Senilai",icon:"üî¢"}],games:[{id:3,title:"Tantangan Mengurutkan Dan Pecahan Senilai",path:"/game/kelas4/bab2/level2",icon:"üéØ"}]},{id:3,title:"Level 3",description:"Operasi Kompleks",icon:"üßÆ",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0, #D066E2)",subChapters:[{id:5,title:"Pecahan Desimal",icon:"‚úñÔ∏è"},{id:6,title:"Pecahan Desimal: Persepuluhan",icon:"‚ûó"}],games:[{id:5,title:"Menghitung Pecahan Desimal Sampai Perespuluhan",path:"/game/kelas4/bab2/level3",icon:"üß©"}]},{id:4,title:"Level 4",description:"Evaluasi & Penerapan",icon:"üèÜ",color:"#009688",gradient:"linear-gradient(135deg, #009688, #4DB6AC)",subChapters:[{id:7,title:"Pecahan Desimal: Perseratusan dan Persen",icon:"üìä"},{id:8,title:"Rangkuman Singkat",icon:"üìù"}],games:[{id:7,title:"Game Latihan Pecahan Desimal",path:"/game/kelas4/bab2/level4",icon:"üéÆ"}],locked:!1}];function Q(){const s=R(),[n,u]=l.useState(null),[f,g]=l.useState(!1),[G,P]=l.useState({}),[r,S]=l.useState([]),[w,d]=l.useState(!1),[B,x]=l.useState(!1),[L,M]=l.useState({}),C=l.useRef(null),D=Array.from({length:50},(e,i)=>({id:i,size:Math.random()*3+1,left:Math.random()*100,top:Math.random()*100,delay:Math.random()*5,duration:Math.random()*3+2})),_=Array.from({length:6},(e,i)=>({id:i,size:Math.random()*150+100,left:Math.random()*100,top:Math.random()*20+10,speed:Math.random()*100+50,delay:Math.random()*20})),$=async()=>{try{const e=JSON.parse(localStorage.getItem("userData"));if(!e||!e.id_siswa)return;const i={};for(const p of o){const c=await O(4,2,p.id);i[p.id]=(c==null?void 0:c.status_selesai)||!1}M(i)}catch(e){console.error("Error checking level completion:",e)}};l.useEffect(()=>{if(!(localStorage.getItem("isLoggedIn")==="true")){s("/login");return}const i=JSON.parse(localStorage.getItem("selectedAvatar"));if(i){const c=`avatar_${i.name}_bab2_levels_progress`,y=JSON.parse(localStorage.getItem(c))||{};P(y);const E=o.filter(h=>{var k;return!h.locked&&((k=y[`level_${h.id}`])==null?void 0:k.completed)}).map(h=>h.id);S(E)}const p=setTimeout(()=>{x(!0)},3e3);return $(),()=>{clearTimeout(p)}},[s]);const j=()=>{z({particleCount:100,spread:70,origin:{y:.6}})},v=e=>{if(e.locked){alert("Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.");return}d(!0),r.includes(e.id)&&j(),u(e),g(!0),x(!1)},F=()=>{const e=o.find(i=>i.id===1);e&&(u(e),g(!0),x(!1),d(!0),r.includes(1)&&j())},b=()=>{g(!1),setTimeout(()=>{u(null),d(!1)},300)},T=e=>{e.title==="Pembilang Satu"?s("/materi/materikelas4/materiBab2_1"):e.title==="Menyebut Pecahan Yang Penyebutnya Sama"?s("/materi/materikelas4/materiBab2_2"):e.title==="Mengurutkan dan Membandingkan Pecahan"?s("/materi/materikelas4/materiBab2_3"):e.title==="Pecahan Senilai"?s("/materi/materikelas4/materiBab2_4"):e.title==="Pecahan Desimal"?s("/materi/materikelas4/materiBab2_5"):e.title==="Pecahan Desimal: Persepuluhan"?s("/materi/materikelas4/materiBab2_6"):e.title==="Pecahan Desimal: Perseratusan dan Persen"?s("/materi/materikelas4/materiBab2_7"):s(`/materi/materikelas4/materiBab1_${e.id}`)},A=e=>{s(e.path)},H=()=>{d(!0),setTimeout(()=>{s("/kelas4")},500)},m=e=>L[e]||!1;return a.jsxs("div",{className:`category-container ${w?"animate-bg":""}`,children:[a.jsxs("div",{className:"background-elements",children:[D.map(e=>a.jsx("div",{className:"star",style:{width:e.size+"px",height:e.size+"px",left:e.left+"%",top:e.top+"%",animationDelay:e.delay+"s",animationDuration:e.duration+"s"}},`star-${e.id}`)),_.map(e=>a.jsx("div",{className:"cloud",style:{width:e.size+"px",height:e.size/2+"px",left:e.left+"%",top:e.top+"%",animationDuration:e.speed+"s",animationDelay:e.delay+"s"}},`cloud-${e.id}`))]}),a.jsxs("header",{className:"header animated-header",children:[a.jsxs(t.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:["BAB 2 ",a.jsx("span",{className:"wave",children:"üßÆ"})]}),a.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.6},className:"header-tagline",children:"Pilih level untuk memulai perjalanan belajar matematika!"})]}),a.jsxs("section",{className:"categories-section",children:[a.jsxs(t.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[a.jsx("span",{className:"category-icon",children:"üìö"})," Bab 2: Operasi Hitung"]}),a.jsx(t.button,{className:"back-button",onClick:H,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:"Kembali"}),a.jsx(N,{children:B&&a.jsxs(t.div,{className:"hint-bubble",initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},children:[a.jsx("div",{className:"hint-arrow"}),a.jsx("p",{children:"Klik kartu level untuk mulai belajar!"})]})}),a.jsx("div",{className:"level-path",children:o.map((e,i)=>a.jsxs(I.Fragment,{children:[i>0&&a.jsx("div",{className:`path-connector ${r.includes(e.id-1)?"completed-path":""}`,children:r.includes(e.id-1)&&a.jsx("div",{className:"path-progress-animation"})}),a.jsx("div",{className:`path-node ${m(e.id)?"completed-node":""} ${e.locked?"locked-node":""}`,onClick:()=>v(e),children:e.id})]},`path-${e.id}`))}),a.jsx("div",{className:"level-grid",children:o.map(e=>a.jsxs(t.div,{className:`level-card ${e.locked?"level-locked":""} ${e.id===1?"level1-card":""}`,onClick:()=>e.id===1?F():v(e),whileHover:e.locked?{}:{scale:1.05,y:-5},whileTap:e.locked?{}:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*e.id},style:{boxShadow:e.id===1?"0 8px 25px rgba(78, 107, 255, 0.4)":"0 8px 20px rgba(0, 0, 0, 0.15)"},ref:e.id===1?C:null,children:[a.jsxs("div",{className:`level-icon-circle ${m(e.id)?"completed":""} ${e.id===1?"level1-icon":""}`,style:{background:e.gradient},children:[e.locked&&a.jsx("div",{className:"lock-overlay",children:"üîí"}),m(e.id)&&a.jsx("div",{className:"completed-check",children:"‚úì"}),a.jsx("span",{className:"level-symbol",children:e.icon})]}),a.jsx("h3",{className:"level-title",children:e.title}),a.jsx("p",{className:"level-description",children:e.description}),a.jsxs("div",{className:"level-info",children:[a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üìö"})," ",e.subChapters.length," Sub Bab"]}),a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üéÆ"})," ",e.games.length," Game"]})]}),a.jsx("div",{className:"level-badge",style:{background:e.color},children:e.id})]},e.id))})]}),a.jsx(N,{children:f&&n&&a.jsx(t.div,{className:"popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b,children:a.jsxs(t.div,{className:"level-popup",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25},style:{background:"linear-gradient(to bottom right, white, #f9f9f9)",borderTop:`5px solid ${n.color}`},onClick:e=>e.stopPropagation(),children:[a.jsx(t.button,{className:"close-popup",onClick:b,initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.1},whileTap:{scale:.9},transition:{duration:.3,type:"spring",stiffness:300},children:"‚úï"}),a.jsxs("div",{className:"popup-header",style:{background:n.gradient},children:[a.jsx("div",{className:"popup-level-icon",children:n.icon}),a.jsxs("h2",{children:["Level ",n.id,": ",n.title]})]}),a.jsxs("div",{className:"popup-sections",children:[a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üìö"}),"Sub-Bab Materi"]}),a.jsx("div",{className:"sub-chapter-list",children:n.subChapters.map(e=>a.jsxs(t.div,{className:"sub-chapter-item",onClick:()=>T(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"sub-chapter-icon",children:e.icon}),a.jsxs("div",{className:"sub-chapter-content",children:[a.jsx("div",{className:"sub-chapter-number",children:e.id}),a.jsx("h4",{children:e.title})]}),a.jsx("div",{className:"sub-chapter-arrow",children:"‚Üí"})]},e.id))})]}),a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üéÆ"}),"Game Latihan"]}),a.jsx("div",{className:"game-list",children:n.games.map(e=>a.jsxs(t.div,{className:"game-item",onClick:()=>A(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"game-icon",children:e.icon}),a.jsxs("div",{className:"game-content",children:[a.jsx("h4",{children:e.title}),a.jsx("span",{className:"game-label",children:"Main Sekarang"})]}),a.jsx("div",{className:"game-arrow",children:"‚Üí"})]},e.id))})]})]}),a.jsx("div",{className:"popup-footer",children:m(n.id)?a.jsxs("div",{className:"level-status completed-status",children:[a.jsx("span",{className:"status-icon",children:"‚úì"})," Level Selesai"]}):a.jsxs("div",{className:"level-status",children:[a.jsx("span",{className:"status-icon",children:"‚è≥"})," Belum Selesai"]})})]})})})]})}export{Q as default};
