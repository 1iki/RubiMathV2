import{b as H,r as l,j as a,m as i,A as v,R as I}from"./vendor-BjgPdEnQ.js";/* empty css                  */import"./react-confetti-ho-PuuYM.js";import"./game-DMqPqpoE.js";import{j as z}from"./guru-D7H-5Pkh.js";const d=[{id:1,title:"Level 1",description:"Pengukuran Luas",icon:"üìè",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50, #81C784)",subChapters:[{id:1,title:"Pengukuran Luas Menggunakan Satuan Tidak Baku",icon:"üü¶"},{id:2,title:"Pengukuran Luas Menggunakan Satuan Baku",icon:"üìê"}],games:[{id:1,title:"Yuk Coba Gamenya!",path:"/game/kelas4/bab4/level1",icon:"üéÆ"}]},{id:2,title:"Level 2",description:"Pengukuran Volume",icon:"üì¶",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3, #64B5F6)",subChapters:[{id:3,title:"Pengukuran Volume Menggunakan Satuan Tidak Baku",icon:"üßä"},{id:4,title:"Pengukuran Volume Menggunakan Satuan Baku",icon:"ü•õ"}],games:[{id:2,title:"Yuk Coba Gamenya!",path:"/game/kelas4/bab4/level2",icon:"üé≤"}]}];function O(){const t=H(),[n,p]=l.useState(null),[y,h]=l.useState(!1),[D,N]=l.useState({}),[F,b]=l.useState([]),[f,m]=l.useState(!1),[S,g]=l.useState(!1),[w,B]=l.useState({}),L=Array.from({length:50},(e,s)=>({id:s,size:Math.random()*3+1,left:Math.random()*100,top:Math.random()*100,delay:Math.random()*5,duration:Math.random()*3+2})),M=Array.from({length:6},(e,s)=>({id:s,size:Math.random()*150+100,left:Math.random()*100,top:Math.random()*20+10,speed:Math.random()*100+50,delay:Math.random()*20})),P=async()=>{try{const e=JSON.parse(localStorage.getItem("userData"));if(!e||!e.id_siswa)return;const s={};for(const o of d){const c=await z(4,4,o.id);s[o.id]=(c==null?void 0:c.status_selesai)||!1}B(s)}catch(e){console.error("Error checking level completion:",e)}};l.useEffect(()=>{if(!(localStorage.getItem("isLoggedIn")==="true")){t("/login");return}const s=JSON.parse(localStorage.getItem("selectedAvatar"));if(s){const c=`avatar_${s.name}_levels_progress`,k=JSON.parse(localStorage.getItem(c))||{};N(k);const A=d.filter(r=>{var j;return!r.locked&&((j=k[`level_${r.id}`])==null?void 0:j.completed)}).map(r=>r.id);b(A)}const o=setTimeout(()=>{g(!0)},3e3);return P(),()=>{clearTimeout(o)}},[t]);const C=e=>{if(e.locked){alert("Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.");return}m(!0),p(e),h(!0),g(!1)},x=()=>{h(!1),setTimeout(()=>{p(null),m(!1)},300)},T=e=>{e.title==="Pengukuran Luas Menggunakan Satuan Tidak Baku"?t("/materi/materikelas4/materiBab4_1"):e.title==="Pengukuran Luas Menggunakan Satuan Baku"?t("/materi/materikelas4/materiBab4_2"):e.title==="Pengukuran Volume Menggunakan Satuan Tidak Baku"?t("/materi/materikelas4/materiBab4_3"):e.title==="Pengukuran Volume Menggunakan Satuan Baku"?t("/materi/materikelas4/materiBab4_4"):t(`/materi/materikelas4/materiBab4_${e.id}`)},_=e=>{t(e.path)},$=()=>{m(!0),setTimeout(()=>{t("/kelas4")},500)},u=e=>w[e]||!1;return a.jsxs("div",{className:`category-container ${f?"animate-bg":""}`,children:[a.jsxs("div",{className:"background-elements",children:[L.map(e=>a.jsx("div",{className:"star",style:{width:e.size+"px",height:e.size+"px",left:e.left+"%",top:e.top+"%",animationDelay:e.delay+"s",animationDuration:e.duration+"s"}},`star-${e.id}`)),M.map(e=>a.jsx("div",{className:"cloud",style:{width:e.size+"px",height:e.size/2+"px",left:e.left+"%",top:e.top+"%",animationDuration:e.speed+"s",animationDelay:e.delay+"s"}},`cloud-${e.id}`))]})," ",a.jsxs("header",{className:"header animated-header",children:[a.jsxs(i.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:["BAB 4 ",a.jsx("span",{className:"wave",children:"üìè"})]}),a.jsx(i.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.6},className:"header-tagline",children:"Belajar pengukuran luas dan volume bersama!"})]}),a.jsxs("section",{className:"categories-section",children:[" ",a.jsxs(i.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[a.jsx("span",{className:"category-icon",children:"üìè"})," Bab 4: Pengukuran Luas dan Volume"]}),a.jsx(i.button,{className:"back-button",onClick:$,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:"Kembali"}),a.jsx(v,{children:S&&a.jsxs(i.div,{className:"hint-bubble",initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},children:[a.jsx("div",{className:"hint-arrow"}),a.jsx("p",{children:"Klik kartu level untuk mulai belajar!"})]})}),a.jsx("div",{className:"level-path",children:d.map((e,s)=>a.jsxs(I.Fragment,{children:[s>0&&a.jsx("div",{className:"path-connector"}),a.jsx("div",{className:`path-node ${e.locked?"locked-node":""}`,children:e.id})]},`path-${e.id}`))}),a.jsx("div",{className:"level-grid",children:d.map(e=>a.jsxs(i.div,{className:`level-card ${e.locked?"level-locked":""}`,onClick:()=>C(e),whileHover:e.locked?{}:{scale:1.05,y:-5},whileTap:e.locked?{}:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*e.id},style:{boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)"},children:[a.jsxs("div",{className:`level-icon-circle ${u(e.id)?"completed":""}`,style:{background:e.gradient},children:[e.locked&&a.jsx("div",{className:"lock-overlay",children:"üîí"}),u(e.id)&&a.jsx("div",{className:"completed-check",children:"‚úì"}),a.jsx("span",{className:"level-symbol",children:e.icon})]}),a.jsx("h3",{className:"level-title",children:e.title}),a.jsx("p",{className:"level-description",children:e.description}),a.jsxs("div",{className:"level-info",children:[a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üìö"})," ",e.subChapters.length," Sub Bab"]}),a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üéÆ"})," ",e.games.length," Game"]})]}),a.jsx("div",{className:"level-badge",style:{background:e.color},children:e.id})]},e.id))})]}),a.jsx(v,{children:y&&n&&a.jsx(i.div,{className:"popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,children:a.jsxs(i.div,{className:"level-popup",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25},style:{background:"linear-gradient(to bottom right, white, #f9f9f9)",borderTop:`5px solid ${n.color}`},onClick:e=>e.stopPropagation(),children:[a.jsx(i.button,{className:"close-popup",onClick:x,initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.1},whileTap:{scale:.9},transition:{duration:.3,type:"spring",stiffness:300},children:"‚úï"}),a.jsxs("div",{className:"popup-header",style:{background:n.gradient},children:[a.jsx("div",{className:"popup-level-icon",children:n.icon}),a.jsxs("h2",{children:["Level ",n.id,": ",n.title]})]}),a.jsxs("div",{className:"popup-sections",children:[a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üìö"}),"Sub-Bab Materi"]}),a.jsx("div",{className:"sub-chapter-list",children:n.subChapters.map(e=>a.jsxs(i.div,{className:"sub-chapter-item",onClick:()=>T(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"sub-chapter-icon",children:e.icon}),a.jsxs("div",{className:"sub-chapter-content",children:[a.jsx("div",{className:"sub-chapter-number",children:e.id}),a.jsx("h4",{children:e.title})]}),a.jsx("div",{className:"sub-chapter-arrow",children:"‚Üí"})]},e.id))})]}),a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üéÆ"}),"Game Latihan"]}),a.jsx("div",{className:"game-list",children:n.games.map(e=>a.jsxs(i.div,{className:"game-item",onClick:()=>_(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"game-icon",children:e.icon}),a.jsxs("div",{className:"game-content",children:[a.jsx("h4",{children:e.title}),a.jsx("span",{className:"game-label",children:"Main Sekarang"})]}),a.jsx("div",{className:"game-arrow",children:"‚Üí"})]},e.id))})]})]}),a.jsx("div",{className:"popup-footer",children:u(n.id)?a.jsxs("div",{className:"level-status completed-status",children:[a.jsx("span",{className:"status-icon",children:"‚úì"})," Level Selesai"]}):a.jsxs("div",{className:"level-status",children:[a.jsx("span",{className:"status-icon",children:"‚è≥"})," Belum Selesai"]})})]})})})]})}export{O as default};
