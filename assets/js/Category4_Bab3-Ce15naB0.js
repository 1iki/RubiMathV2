import{b as A,r as n,j as a,m as t,A as b,R as D}from"./vendor-BjgPdEnQ.js";/* empty css                  */import"./react-confetti-ho-PuuYM.js";import"./game-C_1TzDD9.js";import{j as H}from"./guru-BwvXGu2s.js";const d=[{id:1,title:"Level 1",description:"Pengenalan Pola Gambar",icon:"üè†",color:"#3F51B5",gradient:"linear-gradient(135deg, #3F51B5, #7986CB)",subChapters:[{id:1,title:"Pola Gambar",icon:"üßä"},{id:2,title:"Pola Gambar Membesar",icon:"üì¶"},{id:3,title:"Pola Gambar Mengecil",icon:"üî∑"}],games:[{id:1,title:"Yuk Coba Gamenya!",path:"/game/kelas4/bab3/level1",icon:"üé≤"}]},{id:2,title:"Level 2",description:"Pengenalan Pola Bilangan",icon:"üìê",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50, #81C784)",subChapters:[{id:4,title:"Pola Bilangan",icon:"üéØ"},{id:5,title:"Pola Bilangan Membesar",icon:"üìä"},{id:6,title:"Pola Bilangan Mengecil",icon:"üî¢"}],games:[{id:2,title:"Yuk Coba Gamenya!",path:"/game/kelas4/bab3/level2",icon:"‚ö°"}]}];function R(){const i=A(),[l,h]=n.useState(null),[y,g]=n.useState(!1),[I,N]=n.useState({}),[z,k]=n.useState([]),[f,m]=n.useState(!1),[S,x]=n.useState(!1),[B,P]=n.useState({}),w=Array.from({length:50},(e,s)=>({id:s,size:Math.random()*3+1,left:Math.random()*100,top:Math.random()*100,delay:Math.random()*5,duration:Math.random()*3+2})),M=Array.from({length:6},(e,s)=>({id:s,size:Math.random()*150+100,left:Math.random()*100,top:Math.random()*20+10,speed:Math.random()*100+50,delay:Math.random()*20})),L=async()=>{try{const e=JSON.parse(localStorage.getItem("userData"));if(!e||!e.id_siswa)return;const s={};for(const o of d){const c=await H(4,3,o.id);s[o.id]=(c==null?void 0:c.status_selesai)||!1}P(s)}catch(e){console.error("Error checking level completion:",e)}};n.useEffect(()=>{if(!(localStorage.getItem("isLoggedIn")==="true")){i("/login");return}const s=JSON.parse(localStorage.getItem("selectedAvatar"));if(s){const c=`avatar_${s.name}_levels_progress`,j=JSON.parse(localStorage.getItem(c))||{};N(j);const $=d.filter(r=>{var v;return!r.locked&&((v=j[`level_${r.id}`])==null?void 0:v.completed)}).map(r=>r.id);k($)}const o=setTimeout(()=>{x(!0)},3e3);return L(),()=>{clearTimeout(o)}},[i]);const C=e=>{if(e.locked){alert("Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.");return}m(!0),h(e),g(!0),x(!1)},u=()=>{g(!1),setTimeout(()=>{h(null),m(!1)},300)},_=e=>{e.title==="Pola Gambar"?i("/materi/materikelas4/materiBab3_1"):e.title==="Pola Gambar Membesar"?i("/materi/materikelas4/materiBab3_2"):e.title==="Pola Gambar Mengecil"?i("/materi/materikelas4/materiBab3_3"):e.title==="Pola Bilangan"?i("/materi/materikelas4/materiBab3_4"):e.title==="Pola Bilangan Membesar"?i("/materi/materikelas4/materiBab3_5"):e.title==="Pola Bilangan Mengecil"?i("/materi/materikelas4/materiBab3_6"):i(`/materi/materikelas4/materiBab3_${e.id}`)},G=e=>{i(e.path)},T=()=>{m(!0),setTimeout(()=>{i("/kelas4")},500)},p=e=>B[e]||!1;return a.jsxs("div",{className:`category-container ${f?"animate-bg":""}`,children:[a.jsxs("div",{className:"background-elements",children:[w.map(e=>a.jsx("div",{className:"star",style:{width:e.size+"px",height:e.size+"px",left:e.left+"%",top:e.top+"%",animationDelay:e.delay+"s",animationDuration:e.duration+"s"}},`star-${e.id}`)),M.map(e=>a.jsx("div",{className:"cloud",style:{width:e.size+"px",height:e.size/2+"px",left:e.left+"%",top:e.top+"%",animationDuration:e.speed+"s",animationDelay:e.delay+"s"}},`cloud-${e.id}`))]}),a.jsxs("header",{className:"header animated-header",children:[a.jsxs(t.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:["BAB 3 ",a.jsx("span",{className:"wave",children:"üè†"})]}),a.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.6},className:"header-tagline",children:"Eksplorasi dunia tiga dimensi dengan seru!"})]}),a.jsxs("section",{className:"categories-section",children:[a.jsxs(t.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[a.jsx("span",{className:"category-icon",children:"üì¶"})," Bab 3: Pengenalan Pola Bilangan Dan Gambar"]}),a.jsx(t.button,{className:"back-button",onClick:T,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:"Kembali"}),a.jsx(b,{children:S&&a.jsxs(t.div,{className:"hint-bubble",initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},children:[a.jsx("div",{className:"hint-arrow"}),a.jsx("p",{children:"Klik kartu level untuk mulai belajar!"})]})}),a.jsx("div",{className:"level-path",children:d.map((e,s)=>a.jsxs(D.Fragment,{children:[s>0&&a.jsx("div",{className:"path-connector"}),a.jsx("div",{className:`path-node ${e.locked?"locked-node":""}`,children:e.id})]},`path-${e.id}`))}),a.jsx("div",{className:"level-grid",children:d.map(e=>a.jsxs(t.div,{className:`level-card ${e.locked?"level-locked":""}`,onClick:()=>C(e),whileHover:e.locked?{}:{scale:1.05,y:-5},whileTap:e.locked?{}:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*e.id},style:{boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)"},children:[a.jsxs("div",{className:`level-icon-circle ${p(e.id)?"completed":""}`,style:{background:e.gradient},children:[e.locked&&a.jsx("div",{className:"lock-overlay",children:"üîí"}),p(e.id)&&a.jsx("div",{className:"completed-check",children:"‚úì"}),a.jsx("span",{className:"level-symbol",children:e.icon})]}),a.jsx("h3",{className:"level-title",children:e.title}),a.jsx("p",{className:"level-description",children:e.description}),a.jsxs("div",{className:"level-info",children:[a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üìö"})," ",e.subChapters.length," Sub Bab"]}),a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üéÆ"})," ",e.games.length," Game"]})]}),a.jsx("div",{className:"level-badge",style:{background:e.color},children:e.id})]},e.id))})]}),a.jsx(b,{children:y&&l&&a.jsx(t.div,{className:"popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u,children:a.jsxs(t.div,{className:"level-popup",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25},style:{background:"linear-gradient(to bottom right, white, #f9f9f9)",borderTop:`5px solid ${l.color}`},onClick:e=>e.stopPropagation(),children:[a.jsx(t.button,{className:"close-popup",onClick:u,initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.1},whileTap:{scale:.9},transition:{duration:.3,type:"spring",stiffness:300},children:"‚úï"}),a.jsxs("div",{className:"popup-header",style:{background:l.gradient},children:[a.jsx("div",{className:"popup-level-icon",children:l.icon}),a.jsxs("h2",{children:["Level ",l.id,": ",l.title]})]}),a.jsxs("div",{className:"popup-sections",children:[a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üìö"}),"Sub-Bab Materi"]}),a.jsx("div",{className:"sub-chapter-list",children:l.subChapters.map(e=>a.jsxs(t.div,{className:"sub-chapter-item",onClick:()=>_(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"sub-chapter-icon",children:e.icon}),a.jsxs("div",{className:"sub-chapter-content",children:[a.jsx("div",{className:"sub-chapter-number",children:e.id}),a.jsx("h4",{children:e.title})]}),a.jsx("div",{className:"sub-chapter-arrow",children:"‚Üí"})]},e.id))})]}),a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üéÆ"}),"Game Latihan"]}),a.jsx("div",{className:"game-list",children:l.games.map(e=>a.jsxs(t.div,{className:"game-item",onClick:()=>G(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"game-icon",children:e.icon}),a.jsxs("div",{className:"game-content",children:[a.jsx("h4",{children:e.title}),a.jsx("span",{className:"game-label",children:"Main Sekarang"})]}),a.jsx("div",{className:"game-arrow",children:"‚Üí"})]},e.id))})]})]}),a.jsx("div",{className:"popup-footer",children:p(l.id)?a.jsxs("div",{className:"level-status completed-status",children:[a.jsx("span",{className:"status-icon",children:"‚úì"})," Level Selesai"]}):a.jsxs("div",{className:"level-status",children:[a.jsx("span",{className:"status-icon",children:"‚è≥"})," Belum Selesai"]})})]})})})]})}export{R as default};
