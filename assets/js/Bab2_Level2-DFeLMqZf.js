import{r as m,b as Y,j as n}from"./vendor-BjgPdEnQ.js";import{u as V}from"./game-C_1TzDD9.js";import{m as X}from"./guru-BwvXGu2s.js";const r={body:{background:"linear-gradient(135deg, #fceabb, #f8b500)",fontFamily:"'Poppins', sans-serif",margin:0,padding:0,color:"#222",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},gameContainer:{background:"#fff",borderRadius:20,padding:"25px 30px 40px 30px",maxWidth:480,width:"90vw",boxShadow:"0 15px 40px rgba(0,0,0,0.2)",textAlign:"center"},heading:{marginBottom:15,color:"#f79a00",textShadow:"1px 1px 4px #dd7700",userSelect:"none"},instructions:{fontSize:"1.05rem",marginBottom:20,color:"#444"},questionNumber:{fontSize:"1rem",marginBottom:10,fontWeight:600,color:"#f79a00"},questionText:{fontSize:"1.3rem",marginBottom:25,fontWeight:600},answers:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:15},answerBtn:{background:"#f8b500",border:"none",borderRadius:12,padding:"15px 20px",fontSize:"1.15rem",color:"#fff",cursor:"pointer",boxShadow:"0 6px #c28c00",transition:"all 0.3s ease",userSelect:"none",minWidth:110,margin:"5px"},feedback:{marginTop:20,fontSize:"1.2rem",fontWeight:700,height:32,color:"#222",userSelect:"none",minHeight:24},nextBtn:{marginTop:25,backgroundColor:"#f79a00",border:"none",padding:"12px 30px",borderRadius:30,fontSize:"1.15rem",cursor:"pointer",color:"white",boxShadow:"0 6px #c27100",userSelect:"none",display:"inline-block",transition:"background-color 0.3s"},progressBarContainer:{width:"100%",backgroundColor:"#f0f0f0",borderRadius:10,overflow:"hidden",height:15,marginBottom:20,boxShadow:"inset 0 1px 3px rgb(0 0 0 / 0.1)"},progressBar:{height:"100%",background:"#f79a00",width:"0%",transition:"width 0.4s ease"},score:{marginTop:15,fontWeight:600,fontSize:"1.1rem",color:"#444",userSelect:"none"},fraction:{display:"inline-block",textAlign:"center",verticalAlign:"middle",fontWeight:700,lineHeight:1,userSelect:"none"},fractionTop:{borderBottom:"2px solid #222",fontSize:"1.2rem",color:"#2c3e50",padding:"0 6px"},fractionBottom:{fontSize:"1.2rem",color:"#2c3e50",padding:"0 6px"},startBtn:{fontSize:"1.5rem",backgroundColor:"#f79a00",border:"none",color:"white",padding:"20px 40px",borderRadius:35,cursor:"pointer",boxShadow:"0 8px #c27100",transition:"background-color 0.3s ease",marginTop:30,userSelect:"none"},categoryBtn:{fontSize:"1.2rem",backgroundColor:"#4E6BFF",border:"none",color:"white",padding:"15px 30px",borderRadius:35,cursor:"pointer",boxShadow:"0 6px #3a50c2",transition:"background-color 0.3s ease",marginTop:15,userSelect:"none"}};function q({num:g,den:i}){return i===1?n.jsx("span",{"aria-label":`${g}`,children:g}):n.jsxs("span",{style:r.fraction,role:"img","aria-label":`${g} per ${i}`,children:[n.jsx("span",{style:r.fractionTop,children:g}),n.jsx("span",{style:r.fractionBottom,children:i})]})}function H(g){let i=g.slice(),l=i.length,f;for(;l!==0;)f=Math.floor(Math.random()*l),l--,[i[l],i[f]]=[i[f],i[l]];return i}class a{constructor(i,l){this.num=i,this.den=l}value(){return this.num/this.den}equals(i){const l=(x,P)=>P?l(P,x%P):x,f=l(this.num,this.den),b=l(i.num,i.den),v=this.num/f,z=this.den/f,$=i.num/b,d=i.den/b;return v===$&&z===d}approxEquals(i){return Math.abs(this.value()-i.value())<1e-4}toString(){return`${this.num}/${this.den}`}}const h=[{type:"order",prompt:"Urutkan pecahan berikut dari yang terkecil ke terbesar:",fractions:[new a(3,8),new a(1,4),new a(1,2)]},{type:"order",prompt:"Urutkan pecahan berikut dari yang terkecil ke terbesar:",fractions:[new a(2,3),new a(1,5),new a(1,2)]},{type:"compare",prompt:"Pilih pecahan yang lebih besar:",fractions:[new a(2,5),new a(3,8)]},{type:"compare",prompt:"Pilih pecahan yang lebih besar:",fractions:[new a(2,3),new a(3,5)]},{type:"equivalent",prompt:"Pilih pecahan yang senilai dengan ",base:new a(2,5),choices:[new a(4,10),new a(3,6),new a(1,3)]},{type:"equivalent",prompt:"Pilih pecahan yang senilai dengan ",base:new a(1,3),choices:[new a(2,6),new a(2,5),new a(3,8)]},{type:"order",prompt:"Urutkan pecahan berikut dari yang terkecil ke terbesar:",fractions:[new a(5,6),new a(1,3),new a(1,2)]},{type:"compare",prompt:"Pilih pecahan yang lebih besar:",fractions:[new a(4,7),new a(3,5)]},{type:"equivalent",prompt:"Pilih pecahan yang senilai dengan ",base:new a(3,4),choices:[new a(6,8),new a(4,6),new a(5,7)]},{type:"equivalent",prompt:"Pilih pecahan yang senilai dengan ",base:new a(2,5),choices:[new a(4,10),new a(4,7),new a(3,10)]}];function te(){const[g,i]=m.useState(!1),[l,f]=m.useState(0),[b,v]=m.useState(0),[z,$]=m.useState([]),[d,x]=m.useState(!1),[P,y]=m.useState(""),[W,S]=m.useState(new Set),[M,T]=m.useState(new Set),[I,O]=m.useState(!1),K=Y(),{user:A}=V();m.useEffect(()=>{A||K("/login")},[A,K]);const N=async()=>{if(!A)return;const e={kelas:4,bab:2,level:2,jenis_permainan:"Game Pecahan",skor:b,skor_maksimal:h.length*j,status_selesai:l>=h.length,detail_jawaban:{jawaban:[{total_benar:b/j,total_soal:h.length}]}};await X(e)};m.useEffect(()=>{(b>0||l>=h.length)&&N()},[b,l]);const j=10;function E(){i(!0),f(0),v(0),$([]),x(!1),y(""),S(new Set),T(new Set),O(!1)}const c=h[l]||null;function U(e){d||$(s=>{if(s.some(o=>o.num===e.num&&o.den===e.den))return s;const t=[...s,e];if(t.length===c.fractions.length){let o=[...c.fractions].sort((p,k)=>p.value()-k.value());const u=new Set,w=new Set;let G=!0;for(let p=0;p<t.length;p++)t[p].equals(o[p])?u.add(`${t[p].num}-${t[p].den}`):(w.add(`${t[p].num}-${t[p].den}`),G=!1);G?(v(p=>p+j),y("Yay! Jawaban benar ðŸŽ‰")):y("Coba lagi ya! Jawaban kurang tepat."),S(u),T(w),x(!0)}return t})}function J(e){if(d)return;let s=c.fractions[0].value()>c.fractions[1].value()?c.fractions[0]:c.fractions[1];const t=`${e.num}-${e.den}`,o=`${s.num}-${s.den}`;e.equals(s)?(v(u=>u+j),y("Betul! Pecahan ini lebih besar ðŸ‘"),S(new Set([t]))):(y("Ups, yang benar pecahan yang satunya ya."),T(new Set([t])),S(new Set([o]))),x(!0)}function F(e){if(d)return;const s=`${e.num}-${e.den}`,t=(k,B)=>B?t(B,k%B):k,o=t(c.base.num,c.base.den),u={num:c.base.num/o,den:c.base.den/o},w=t(e.num,e.den),G={num:e.num/w,den:e.den/w};if(u.num===G.num&&u.den===G.den)v(k=>k+j),y("Hebat! Itu pecahan senilai ðŸ˜Š"),S(new Set([s]));else{y("Bukan itu, ini bukan pecahan senilai."),T(new Set([s]));const k=c.choices.filter(C=>{const R=t(C.num,C.den),_={num:C.num/R,den:C.den/R};return u.num===_.num&&u.den===_.den}),B=new Set;k.forEach(C=>{B.add(`${C.num}-${C.den}`)}),S(B)}x(!0)}function D(){f(e=>e+1),$([]),x(!1),y(""),S(new Set),T(new Set)}function L(){K("/category4_bab2")}if(!g)return n.jsx("main",{style:r.body,children:n.jsxs("div",{style:r.gameContainer,"aria-label":"Game pecahan seru untuk anak kelas 4 SD",children:[n.jsx("h1",{style:r.heading,children:"Game Pecahan Seru!"}),n.jsxs("div",{style:r.instructions,"aria-live":"polite",children:["Yuk belajar pecahan dengan cara yang seru dan interaktif!",n.jsx("br",{}),"Kamu akan menjawab 10 soal tentang mengurutkan, membandingkan, dan pecahan senilai."]}),n.jsx("button",{style:r.startBtn,onClick:E,"aria-label":"Mulai permainan",type:"button",children:"Mulai Game"})]})});if(l>=h.length){let e="";const s=h.length*j,t=b/s*100;return I||O(!0),t===100?e="Hebat sekali! Kamu sangat pintar dalam pecahan!":t>=70?e="Bagus! Terus berlatih dan kamu pasti semakin hebat!":e="Jangan menyerah! Pelajari lagi dan coba lagi ya!",n.jsx("main",{style:r.body,children:n.jsxs("div",{style:r.gameContainer,"aria-label":"Game pecahan seru untuk anak kelas 4 SD",children:[n.jsx("h1",{style:r.heading,children:"Game Pecahan Seru!"}),n.jsx("p",{style:{fontWeight:"bold",fontSize:24},children:"ðŸŽ‰ Kamu sudah selesai! ðŸŽ‰"}),n.jsxs("p",{style:{fontSize:20,marginTop:15},children:["Skor kamu: ",n.jsx("strong",{children:b})," dari ",n.jsx("strong",{children:s})]}),n.jsx("p",{style:{marginTop:20,fontSize:18,color:"#f79a00"},children:e}),n.jsx("button",{style:r.startBtn,onClick:E,"aria-label":"Mainkan lagi",type:"button",children:"Mainkan Lagi"}),n.jsx("button",{style:r.categoryBtn,onClick:L,"aria-label":"Kembali ke kategori",type:"button",onMouseOver:o=>o.currentTarget.style.backgroundColor="#3a50c2",onMouseOut:o=>o.currentTarget.style.backgroundColor="#4E6BFF",children:"Kembali ke Kategori"})]})})}const Q=l/h.length*100;return n.jsx("main",{style:r.body,children:n.jsxs("div",{style:r.gameContainer,"aria-label":"Game pecahan seru untuk anak kelas 4 SD",children:[n.jsx("h1",{style:r.heading,children:"Game Pecahan Seru!"}),n.jsx("div",{"aria-hidden":"true",style:r.progressBarContainer,children:n.jsx("div",{style:{...r.progressBar,width:`${Q}%`}})}),n.jsxs("div",{style:r.questionNumber,children:["Soal ",l+1," dari ",h.length]}),n.jsxs("div",{style:r.score,children:["Skor: ",b," dari ",h.length*j]}),n.jsxs("div",{style:r.questionText,children:[c.prompt,c.type==="equivalent"&&n.jsx(q,{num:c.base.num,den:c.base.den})]}),n.jsxs("div",{style:r.answers,role:"listbox","aria-label":"Pilihan jawaban",children:[c.type==="order"&&H(c.fractions).map(e=>{const s=z.some(w=>w.num===e.num&&w.den===e.den),t=`${e.num}-${e.den}`,o=W.has(t),u=M.has(t);return n.jsx("button",{style:{...r.answerBtn,backgroundColor:d?o?"#4caf50":u?"#e53935":"#f8b500":"#f8b500",boxShadow:d?o?"0 6px #357a38":u?"0 6px #a32b2b":"0 6px #c28c00":"0 6px #c28c00",opacity:s&&!d||d&&!o&&!u?.5:1},type:"button",disabled:d||s,"aria-label":`Pecahan ${e.num} per ${e.den}`,onClick:()=>U(e),children:n.jsx(q,{num:e.num,den:e.den})},t)}),c.type==="compare"&&c.fractions.map(e=>{const s=`${e.num}-${e.den}`,t=W.has(s),o=M.has(s);return n.jsx("button",{style:{...r.answerBtn,backgroundColor:d?t?"#4caf50":o?"#e53935":"#f8b500":"#f8b500",boxShadow:d?t?"0 6px #357a38":o?"0 6px #a32b2b":"0 6px #c28c00":"0 6px #c28c00",opacity:d&&!t&&!o?.5:1},type:"button",disabled:d,"aria-label":`Pecahan ${e.num} per ${e.den}`,onClick:()=>J(e),children:n.jsx(q,{num:e.num,den:e.den})},s)}),c.type==="equivalent"&&H(c.choices).map(e=>{const s=`${e.num}-${e.den}`,t=W.has(s),o=M.has(s);return n.jsx("button",{style:{...r.answerBtn,backgroundColor:d?t?"#4caf50":o?"#e53935":"#f8b500":"#f8b500",boxShadow:d?t?"0 6px #357a38":o?"0 6px #a32b2b":"0 6px #c28c00":"0 6px #c28c00",opacity:d&&!t&&!o?.5:1},type:"button",disabled:d,"aria-label":`Pecahan ${e.num} per ${e.den}`,onClick:()=>F(e),children:n.jsx(q,{num:e.num,den:e.den})},s)})]}),n.jsx("div",{style:r.feedback,"aria-live":"assertive",children:P}),d&&l<h.length-1&&n.jsx("button",{type:"button",style:r.nextBtn,"aria-label":"Tombol soal berikutnya",onClick:D,onMouseOver:e=>e.currentTarget.style.backgroundColor="#dd7f00",onMouseOut:e=>e.currentTarget.style.backgroundColor="#f79a00",children:"Soal Berikutnya"}),d&&l===h.length-1&&n.jsx("button",{type:"button",style:r.nextBtn,"aria-label":"Tombol lihat hasil akhir",onClick:D,onMouseOver:e=>e.currentTarget.style.backgroundColor="#dd7f00",onMouseOut:e=>e.currentTarget.style.backgroundColor="#f79a00",children:"Lihat Hasil Akhir"})]})})}export{te as default};
