import{b as H,r as n,j as a,m as s,A as N,R as I}from"./vendor-BjgPdEnQ.js";/* empty css                  */import{R as z}from"./react-confetti-ho-PuuYM.js";import"./game-DMqPqpoE.js";import{j as K}from"./guru-D7H-5Pkh.js";const o=[{id:1,title:"Level 1",description:"Pengenalan Dasar",icon:"üî¢",color:"#FF6B6B",gradient:"linear-gradient(135deg, #FF6B6B, #FF8E8E)",subChapters:[{id:1,title:"Cara Membaca dan Menulis Bilangan Cacah",icon:"üìò"},{id:2,title:"Cara Membandingkan dan Mengurutkan Bilangan Cacah Sampai 10.000",icon:"üî¢"}],games:[{id:1,title:"Petualangan Bilangan Cacah",path:"/game/kelas4/bab1/level1",icon:"üî¢"}]},{id:2,title:"Level 2",description:"Operasi Dasar",icon:"üßÆ",color:"#4ECDC4",gradient:"linear-gradient(135deg, #4ECDC4, #7EE8FA)",subChapters:[{id:3,title:"Komposisi Bilangan Cacah Sampai 10.000",icon:"‚ûï"},{id:4,title:"Pengurangan Bilangan Cacah Sampai 1.000",icon:"‚ûñ"}],games:[{id:2,title:"Tantangan Komposisi & Pengurangan",path:"/game/kelas4/bab1/level2",icon:"üßÆ"}]},{id:3,title:"Level 3",description:"Geometri Dasar",icon:"üìê",color:"#FFD166",gradient:"linear-gradient(135deg, #FFD166, #FFF3B0)",subChapters:[{id:5,title:"Perkalian Bilangan Cacah Sampai 1.000",icon:"‚úñÔ∏è"},{id:6,title:"Pembagian Bilangan Cacah Sampai 1.000",icon:"‚ûó"}],games:[{id:5,title:"Latihan Perkalian Dan Pembagian",path:"/game/kelas4/bab1/level3",icon:"üß©"}]},{id:4,title:"Level 4",description:"Bangun Ruang",icon:"üßä",color:"#6A0572",gradient:"linear-gradient(135deg, #6A0572, #AB83A1)",subChapters:[{id:7,title:"Faktor Kelipatan",icon:"üßä"},{id:8,title:"Evaluasi",icon:"üì¶"}],games:[{id:7,title:"Ayo Latihan!",path:"/game/kelas4/bab1/level4",icon:"üé≤"}],locked:!1}];function V(){const l=H(),[t,u]=n.useState(null),[f,g]=n.useState(!1),[G,k]=n.useState({}),[r,S]=n.useState([]),[C,d]=n.useState(!1),[w,x]=n.useState(!1),B=n.useRef(null),[L,P]=n.useState({}),F=Array.from({length:50},(e,i)=>({id:i,size:Math.random()*3+1,left:Math.random()*100,top:Math.random()*100,delay:Math.random()*5,duration:Math.random()*3+2})),M=Array.from({length:6},(e,i)=>({id:i,size:Math.random()*150+100,left:Math.random()*100,top:Math.random()*20+10,speed:Math.random()*100+50,delay:Math.random()*20})),D=async()=>{try{const e=JSON.parse(localStorage.getItem("userData"));if(!e||!e.id_siswa)return;const i={};for(const p of o){const c=await K(4,1,p.id);i[p.id]=(c==null?void 0:c.status_selesai)||!1}P(i)}catch(e){console.error("Error checking level completion:",e)}};n.useEffect(()=>{if(!(localStorage.getItem("isLoggedIn")==="true")){l("/login");return}const i=JSON.parse(localStorage.getItem("selectedAvatar"));if(i){const c=`avatar_${i.name}_bab1_levels_progress`,y=JSON.parse(localStorage.getItem(c))||{};k(y);const R=o.filter(h=>{var b;return!h.locked&&((b=y[`level_${h.id}`])==null?void 0:b.completed)}).map(h=>h.id);S(R)}const p=setTimeout(()=>{x(!0)},3e3);return D(),()=>{clearTimeout(p)}},[l]);const j=()=>{z({particleCount:100,spread:70,origin:{y:.6}})},$=e=>{if(e.locked){alert("Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.");return}d(!0),r.includes(e.id)&&j(),u(e),g(!0),x(!1)},A=()=>{const e=o.find(i=>i.id===1);e&&(u(e),g(!0),x(!1),d(!0),r.includes(1)&&j())},v=()=>{g(!1),setTimeout(()=>{u(null),d(!1)},300)},T=e=>{l(`/materi/materikelas4/materiBab1_${e.id}`)},E=e=>{l(e.path)},_=()=>{d(!0),setTimeout(()=>{l("/kelas4")},500)},m=e=>L[e]||!1;return a.jsxs("div",{className:`category-container ${C?"animate-bg":""}`,children:[a.jsxs("div",{className:"background-elements",children:[F.map(e=>a.jsx("div",{className:"star",style:{width:e.size+"px",height:e.size+"px",left:e.left+"%",top:e.top+"%",animationDelay:e.delay+"s",animationDuration:e.duration+"s"}},`star-${e.id}`)),M.map(e=>a.jsx("div",{className:"cloud",style:{width:e.size+"px",height:e.size/2+"px",left:e.left+"%",top:e.top+"%",animationDuration:e.speed+"s",animationDelay:e.delay+"s"}},`cloud-${e.id}`))]}),a.jsxs("header",{className:"header animated-header",children:[a.jsxs(s.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:["BAB 1 ",a.jsx("span",{className:"wave",children:"üéì"})]}),a.jsx(s.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.6},className:"header-tagline",children:"Pilih level untuk memulai petualangan belajarmu!"})]}),a.jsxs("section",{className:"categories-section",children:[a.jsxs(s.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[a.jsx("span",{className:"category-icon",children:"üöÄ"})," Pilih Level"]}),a.jsx(s.button,{className:"back-button",onClick:_,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:"Kembali"}),a.jsx(N,{children:w&&a.jsxs(s.div,{className:"hint-bubble",initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},children:[a.jsx("div",{className:"hint-arrow"}),a.jsx("p",{children:"Klik kartu level untuk mulai belajar!"})]})}),a.jsx("div",{className:"level-path",children:o.map((e,i)=>a.jsxs(I.Fragment,{children:[i>0&&a.jsx("div",{className:`path-connector ${r.includes(e.id-1)?"completed-path":""}`,children:r.includes(e.id-1)&&a.jsx("div",{className:"path-progress-animation"})}),a.jsx("div",{className:`path-node ${m(e.id)?"completed-node":""} ${e.locked?"locked-node":""}`,children:e.id})]},`path-${e.id}`))}),a.jsx("div",{className:"level-grid",children:o.map(e=>a.jsxs(s.div,{className:`level-card ${e.locked?"level-locked":""} ${e.id===1?"level1-card":""}`,onClick:()=>e.id===1?A():$(e),whileHover:e.locked?{}:{scale:1.05,y:-5},whileTap:e.locked?{}:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*e.id},style:{boxShadow:e.id===1?"0 8px 25px rgba(255, 107, 107, 0.4)":"0 8px 20px rgba(0, 0, 0, 0.15)"},ref:e.id===1?B:null,children:[a.jsxs("div",{className:`level-icon-circle ${m(e.id)?"completed":""}`,style:{background:e.gradient},children:[e.locked&&a.jsx("div",{className:"lock-overlay",children:"üîí"}),m(e.id)&&a.jsx("div",{className:"completed-check",children:"‚úì"}),a.jsx("span",{className:"level-symbol",children:e.icon})]}),a.jsx("h3",{className:"level-title",children:e.title}),a.jsx("p",{className:"level-description",children:e.description}),a.jsxs("div",{className:"level-info",children:[a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üìö"})," ",e.subChapters.length," Sub Bab"]}),a.jsxs("span",{className:"info-item",children:[a.jsx("i",{className:"info-icon",children:"üéÆ"})," ",e.games.length," Game"]})]}),a.jsx("div",{className:"level-badge",style:{background:e.color},children:e.id})]},e.id))})]}),a.jsx(N,{children:f&&t&&a.jsx(s.div,{className:"popup-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:v,children:a.jsxs(s.div,{className:"level-popup",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25},style:{background:"linear-gradient(to bottom right, white, #f9f9f9)",borderTop:`5px solid ${t.color}`},onClick:e=>e.stopPropagation(),children:[a.jsx(s.button,{className:"close-popup",onClick:v,initial:{opacity:0},animate:{opacity:1},whileHover:{scale:1.1},whileTap:{scale:.9},transition:{duration:.3,type:"spring",stiffness:300},children:"‚úï"}),a.jsxs("div",{className:"popup-header",style:{background:t.gradient},children:[a.jsx("div",{className:"popup-level-icon",children:t.icon}),a.jsxs("h2",{children:["Level ",t.id,": ",t.title]})]}),a.jsxs("div",{className:"popup-sections",children:[a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üìö"}),"Sub-Bab Materi"]}),a.jsx("div",{className:"sub-chapter-list",children:t.subChapters.map(e=>a.jsxs(s.div,{className:"sub-chapter-item",onClick:()=>T(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"sub-chapter-icon",children:e.icon}),a.jsxs("div",{className:"sub-chapter-content",children:[a.jsx("div",{className:"sub-chapter-number",children:e.id}),a.jsx("h4",{children:e.title})]}),a.jsx("div",{className:"sub-chapter-arrow",children:"‚Üí"})]},e.id))})]}),a.jsxs("div",{className:"popup-section",children:[a.jsxs("h3",{children:[a.jsx("span",{className:"section-icon",children:"üéÆ"}),"Game Latihan"]}),a.jsx("div",{className:"game-list",children:t.games.map(e=>a.jsxs(s.div,{className:"game-item",onClick:()=>E(e),whileHover:{scale:1.02,boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.98},children:[a.jsx("div",{className:"game-icon",children:e.icon}),a.jsxs("div",{className:"game-content",children:[a.jsx("h4",{children:e.title}),a.jsx("span",{className:"game-label",children:"Main Sekarang"})]}),a.jsx("div",{className:"game-arrow",children:"‚Üí"})]},e.id))})]})]}),a.jsx("div",{className:"popup-footer",children:m(t.id)?a.jsxs("div",{className:"level-status completed-status",children:[a.jsx("span",{className:"status-icon",children:"‚úì"})," Level Selesai"]}):a.jsxs("div",{className:"level-status",children:[a.jsx("span",{className:"status-icon",children:"‚è≥"})," Belum Selesai"]})})]})})})]})}export{V as default};
