import{r as s,b as W,j as n}from"./vendor-BjgPdEnQ.js";import{u as E}from"./game-DMqPqpoE.js";import{m as R}from"./guru-D7H-5Pkh.js";const l=[{decimal:"0,25",percent:"25%"},{decimal:"0,1",percent:"10%"},{decimal:"0,75",percent:"75%"},{decimal:"0,03",percent:"3%"},{decimal:"0,5",percent:"50%"},{decimal:"0,09",percent:"9%"},{decimal:"0,40",percent:"40%"},{decimal:"0,01",percent:"1%"},{decimal:"0,60",percent:"60%"},{decimal:"0,90",percent:"90%"}],k=x=>{const d=x.slice();for(let c=d.length-1;c>0;c--){const u=Math.floor(Math.random()*(c+1));[d[c],d[u]]=[d[u],d[c]]}return d},I=()=>{const[x,d]=s.useState(l),[c,u]=s.useState([]),[j,m]=s.useState([]),[f,b]=s.useState(0),[i,y]=s.useState(!1),p=s.useRef(null),g=W(),{user:h}=E();s.useEffect(()=>{h||g("/login")},[h,g]);const D=async()=>{if(!h)return;const e={kelas:4,bab:2,level:4,jenis_permainan:"Pecahan Desimal dan Persen",skor:f,skor_maksimal:l.length,status_selesai:i,detail_jawaban:{jawaban:[{total_benar:f,total_soal:l.length}]}};await R(e)};s.useEffect(()=>{(f>0||i)&&D()},[f,i]),s.useEffect(()=>{S()},[]);const S=()=>{b(0),y(!1);let e=k(l.map(o=>o.decimal)),t=k(l.map(o=>o.percent));u(e),m(t.map(o=>({percent:o,status:"empty"})))},w=(e,t)=>{p.current=t,e.dataTransfer.effectAllowed="move"},F=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},v=(e,t)=>{e.preventDefault();let o=p.current;if(!o)return;l.find(a=>a.decimal===o&&a.percent===t)?(m(a=>a.map(r=>r.percent===t?{...r,status:"correct"}:r)),u(a=>a.filter(r=>r!==o)),b(a=>{const r=a+1;return r===l.length&&y(!0),r})):(m(a=>a.map(r=>r.percent===t?{...r,status:"incorrect"}:r)),setTimeout(()=>{m(a=>a.map(r=>r.percent===t?{...r,status:"empty"}:r))},1e3)),p.current=null},C=()=>{p.current=null};return n.jsxs("div",{style:{fontFamily:"'Baloo 2', cursive",background:"linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%)",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",padding:30,color:"#222"},children:[n.jsx("h1",{style:{color:"#FF6F61",textShadow:"1px 1px 2px #d86052",marginBottom:10,userSelect:"none"},children:"Game Cocokkan Pecahan Desimal & Persen"}),n.jsx("div",{style:{color:"#1c3c72",marginBottom:30,fontWeight:600,userSelect:"none",fontSize:18,textAlign:"center",maxWidth:600},children:"Seret pecahan desimal ke persen yang tepat!"}),n.jsxs("div",{style:{maxWidth:600,background:"white",borderRadius:20,boxShadow:"0 12px 25px rgba(0,0,0,0.18)",padding:30,width:"100%",display:"flex",justifyContent:"space-between",flexWrap:"wrap",userSelect:"none"},children:[n.jsxs("div",{style:{width:"45%",display:"flex",flexDirection:"column",gap:15},children:[n.jsx("h2",{style:{marginBottom:15,color:"#205072",fontWeight:700},children:"Pecahan Desimal"}),c.length===0&&!i&&n.jsx("div",{style:{fontSize:16,color:"#888"},children:"Tidak ada pecahan tersisa."}),c.map(e=>n.jsx("div",{draggable:!i,onDragStart:t=>w(t,e),onDragEnd:C,tabIndex:0,role:"option","aria-grabbed":"false",style:{backgroundColor:"#FFBC42",borderRadius:12,padding:"15px 20px",fontSize:20,textAlign:"center",boxShadow:"0 6px 12px rgba(255, 188, 66, 0.6)",cursor:i?"default":"grab",userSelect:"none"},onKeyDown:t=>{i||(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),p.current=e)},children:e},e))]}),n.jsxs("div",{style:{width:"45%",display:"flex",flexDirection:"column",gap:15},children:[n.jsx("h2",{style:{marginBottom:15,color:"#205072",fontWeight:700},children:"Persen"}),j.map(e=>n.jsxs("div",{onDragOver:F,onDrop:t=>v(t,e.percent),tabIndex:0,role:"listitem","aria-dropeffect":"move",onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&p.current&&v(t,e.percent)},style:{backgroundColor:e.status==="correct"?"#55efc4":e.status==="incorrect"?"#ff7675":"#dfe6e9",boxShadow:e.status==="correct"?"0 0 14px #00b894":e.status==="incorrect"?"0 0 14px #d63031":"inset 0 0 8px #b2bec3",color:e.status==="correct"?"#056952":e.status==="incorrect"?"#6e1500":"#222",fontWeight:e.status==="correct"||e.status==="incorrect"?700:400,minHeight:52,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:12,fontSize:20,userSelect:"none",cursor:"default",transition:"background-color 0.3s ease"},children:[e.percent," ",e.status==="correct"?"✔️":e.status==="incorrect"?"✘":""]},e.percent))]})]}),n.jsxs("div",{style:{marginTop:25,fontSize:24,fontWeight:700,color:"#FF6F61",userSelect:"none"},children:["Cocokkan yang benar: ",f," dari ",l.length]}),i&&n.jsx("button",{onClick:()=>S(),style:{marginTop:20,backgroundColor:"#FF6F61",padding:"12px 30px",border:"none",borderRadius:25,color:"white",fontWeight:700,fontSize:18,cursor:"pointer",boxShadow:"0 8px 18px rgba(255,111,97,0.7)",userSelect:"none"},children:"Main Lagi"}),n.jsx("button",{onClick:()=>g("/category4_bab2"),style:{marginTop:15,backgroundColor:"#3498db",padding:"12px 30px",border:"none",borderRadius:25,color:"white",fontWeight:700,fontSize:18,cursor:"pointer",boxShadow:"0 8px 18px rgba(52,152,219,0.7)",userSelect:"none"},children:"Kembali ke Kategori"})]})};export{I as default};
