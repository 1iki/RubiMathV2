import{r as n,b as $,j as e,m as p}from"./vendor-BjgPdEnQ.js";import{b as M,a as J,s as K,g as O}from"./gold-B12Hfpl_.js";const o=[{title:"Bab 1",levels:["Level 1"]},{title:"Bab 2",levels:["Level 1"]},{title:"Bab 3",levels:["Level 1"]},{title:"Bab 4",levels:["Level 1"]},{title:"Bab 5",levels:["Level 1"]},{title:"Bab 6",levels:["Level 1"]}];function W(){const[c,h]=n.useState(null),[a,u]=n.useState(0),[R,b]=n.useState(Array(o.length).fill(0)),[r,y]=n.useState(null),[S,j]=n.useState({completedLevels:0}),[f,I]=n.useState({}),s=$();n.useEffect(()=>{if(console.log("MainSiswa2 mounted"),document.body.style.backgroundColor="#ffffff",document.body.style.color="#333333",!(localStorage.getItem("isLoggedIn")==="true")){s("/login");return}const l=localStorage.getItem("userData"),d=l?JSON.parse(l):null,v=localStorage.getItem("selectedAvatar");if(v){const i=JSON.parse(v);y({...i,displayName:(d==null?void 0:d.nama)||i.name});const m=`avatar_${i.name}_levelScores`;JSON.parse(localStorage.getItem(m));let x=0;const g=Array(o.length).fill(0);b(g),j({completedLevels:x}),I({});const z=g.reduce((A,_)=>A+_,0)/o.length;u(z);const P=`avatar_${i.name}_chapterProgress`;localStorage.setItem(P,JSON.stringify(g))}else{const i=JSON.parse(localStorage.getItem("chapterProgress"))||Array(o.length).fill(0);b(i);const m=i.reduce((x,g)=>x+g,0)/o.length;u(m)}},[s]);const N=t=>{t===0?(localStorage.setItem("currentBabIndex",0),localStorage.setItem("currentLevelIndex",0),s("/category2_bab1")):t===1?(localStorage.setItem("currentBabIndex",1),localStorage.setItem("currentLevelIndex",0),s("/category2_bab2")):t===2?(localStorage.setItem("currentBabIndex",2),localStorage.setItem("currentLevelIndex",0),s("/category2_bab3")):t===3?(localStorage.setItem("currentBabIndex",3),localStorage.setItem("currentLevelIndex",0),s("/category2_bab4")):t===4?(localStorage.setItem("currentBabIndex",4),localStorage.setItem("currentLevelIndex",0),s("/category2_bab5")):t===5?(localStorage.setItem("currentBabIndex",5),localStorage.setItem("currentLevelIndex",0),s("/category2_bab6")):h(t)},w=(t,l)=>{localStorage.setItem("currentBabIndex",t),localStorage.setItem("currentLevelIndex",l),s(`/category?chapter=${t}&level=${l}`)},C=()=>{h(null)},L=()=>{localStorage.removeItem("isLoggedIn"),s("/login")},k=()=>{s("/skor")},B=(t,l)=>{if(!r)return!1;const d=`bab${t}_level${l}`;return f[d]&&f[d].length>0};return e.jsxs("div",{className:"main-siswa-container",style:{color:"#333333",backgroundImage:`url(${M})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[e.jsxs("header",{className:"header-siswa",style:{position:"relative",zIndex:1},children:[" ",e.jsx(p.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},style:{color:"#ff5722",textShadow:"2px 2px 4px rgba(0,0,0,0.5)"},children:"Game Matematika Siswa"}),e.jsxs("div",{className:"profile-section",children:[e.jsx("div",{className:"profile-icon",children:r?e.jsx("img",{src:r.src,alt:r.displayName||r.name,className:"avatar-image"}):"ðŸ‘¤"}),e.jsxs("div",{className:"profile-actions",children:[e.jsx("button",{onClick:k,className:"score-button",children:"Lihat Progres"}),e.jsx("button",{onClick:L,className:"logout-button",children:"Keluar"})," "]})]})]}),e.jsxs("div",{className:"progress-container",style:{position:"relative",zIndex:1,backgroundColor:"transparent",padding:"15px"},children:[e.jsxs("div",{className:"progress-info",style:{color:"white"},children:[e.jsxs("p",{children:["Progress"," ",e.jsx("strong",{children:r?r.displayName:"Siswa"}),":"," ",Math.round(a),"%"]}),e.jsxs("p",{children:["Level Selesai: ",e.jsx("strong",{children:S.completedLevels})," dari 9"]})]}),e.jsxs("div",{className:"progress-bar",style:{position:"relative",marginBottom:"20px",width:"90%",margin:"0 auto 30px auto",height:"15px"},children:[" ",e.jsx("div",{style:{position:"absolute",left:"30%",top:-2,bottom:-2,width:"3px",backgroundColor:"#ff5722"}}),e.jsx("div",{style:{position:"absolute",left:"60%",top:-2,bottom:-2,width:"3px",backgroundColor:"#ff5722"}}),e.jsx("div",{style:{position:"absolute",right:"0",top:-2,bottom:-2,width:"3px",backgroundColor:"#ff5722"}}),e.jsx(p.div,{className:"progress",style:{width:`${a}%`},initial:{width:0},animate:{width:`${a}%`},transition:{duration:.8}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"30px",position:"relative",padding:"0",height:"70px",width:"90%",margin:"0 auto",overflow:"visible"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",position:"absolute",left:"30%",transform:"translateX(-50%)"},children:[" ",e.jsx("img",{src:J,alt:"Bronze Badge",style:{width:"60px",height:"60px",marginRight:"10px",opacity:a>=30?"1":"0.4",filter:a>=30?"none":"grayscale(80%)",transition:"all 0.3s ease"}}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"bold",fontSize:"0.9rem",textAlign:"left",opacity:a>=30?"1":"0.6"},children:"Bronze"}),e.jsx("p",{style:{margin:"2px 0 0 0",fontSize:"0.8rem",textAlign:"left",color:a>=30?"#ff5722":"#999999"},children:"30%"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",position:"absolute",left:"60%",transform:"translateX(-50%)"},children:[" ",e.jsx("img",{src:K,alt:"Silver Badge",style:{width:"60px",height:"60px",marginRight:"10px",opacity:a>=60?"1":"0.4",filter:a>=60?"none":"grayscale(80%)",transition:"all 0.3s ease"}}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"bold",fontSize:"0.9rem",textAlign:"left",opacity:a>=60?"1":"0.6"},children:"Silver"}),e.jsx("p",{style:{margin:"2px 0 0 0",fontSize:"0.8rem",textAlign:"left",color:a>=60?"#ff5722":"#999999"},children:"60%"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",position:"absolute",left:"calc(100% - 2px)",transform:"translateX(-50%)"},children:[" ",e.jsx("img",{src:O,alt:"Gold Badge",style:{width:"60px",height:"60px",marginRight:"10px",opacity:a>=100?"1":"0.4",filter:a>=100?"none":"grayscale(80%)",transition:"all 0.3s ease"}}),e.jsxs("div",{style:{whiteSpace:"nowrap"},children:[e.jsx("p",{style:{margin:0,fontWeight:"bold",fontSize:"0.9rem",textAlign:"left",opacity:a>=100?"1":"0.6"},children:"Gold"}),e.jsx("p",{style:{margin:"2px 0 0 0",fontSize:"0.8rem",textAlign:"left",color:a>=100?"#ff5722":"#999999"},children:"100%"})]})]})]})]}),e.jsx("div",{className:"chapter-buttons",style:{position:"relative",zIndex:1},children:o.map((t,l)=>e.jsx(p.button,{className:"big-chapter-button",onClick:()=>N(l),initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2*l},style:{backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",textShadow:"1px 1px 2px black",padding:"25px 15px 15px",fontSize:"1.5rem",fontWeight:"bold",display:"flex",flexDirection:"column",alignItems:"center"},children:t.title},l))})," ",c!==null&&c!==0&&e.jsx("div",{className:"popup-overlay",style:{zIndex:10,backgroundColor:"rgba(0, 0, 0, 0.7)"},children:e.jsxs(p.div,{className:"popup",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},style:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"2px solid #ff5722",color:"white"},children:[" ",e.jsx("h2",{children:o[c].title}),e.jsx("div",{className:"levels",children:o[c].levels.map((t,l)=>e.jsx("div",{className:"level-container",children:e.jsx("button",{className:`level-button ${B(c,l)?"level-completed":""}`,onClick:()=>w(c,l),children:t})},l))}),e.jsx("button",{className:"close-popup-button",onClick:C,children:"âœ– Kembali ke Menu"})]})})]})}export{W as default};
