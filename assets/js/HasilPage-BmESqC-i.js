import{u as k,b as M,r as _,j as a,m as S}from"./vendor-BjgPdEnQ.js";/* empty css             */function A(){const{score:s}=k(),l=M(),[n,$]=_.useState({babIndex:0,levelIndex:0,levelKey:""});_.useEffect(()=>{const e=localStorage.getItem("currentLevelKey")||"";if(e){const t=e.match(/bab(\d+)/),r=e.match(/level(\d+)/);t&&r&&$({babIndex:parseInt(t[1]),levelIndex:parseInt(r[1]),levelKey:e})}if(e&&s){const t=localStorage.getItem("selectedAvatar");if(t){const m=JSON.parse(t),I=`avatar_${m.name}_levelScores`,h=localStorage.getItem("currentOperation")||"addition",b=Date.now(),p=`${e}_${h}_${b}`;let g=JSON.parse(localStorage.getItem(I))||{};g[p]=parseInt(s),localStorage.setItem(I,JSON.stringify(g));const u=`avatar_${m.name}_operations`,f=JSON.parse(localStorage.getItem(u))||{};f[p]=h,localStorage.setItem(u,JSON.stringify(f)),localStorage.setItem(`${p}_timestamp`,b.toString());const[P,w]=e.split("_"),y=parseInt(P.replace("bab","")),x=`avatar_${m.name}_chapterProgress`;let N=JSON.parse(localStorage.getItem(x))||Array(3).fill(0);const O=new Set;Object.keys(g).forEach(L=>{const d=L.split("_");d.length>=2&&d[0]===`bab${y}`&&O.add(d[1])});const K=Math.min(O.size/3*100,100);N[y]=K,localStorage.setItem(x,JSON.stringify(N))}const r=localStorage.getItem("currentOperation")||"addition",o=Date.now(),c=`${e}_${r}_${o}`;let v=JSON.parse(localStorage.getItem("levelScores"))||{};v[c]=parseInt(s),localStorage.setItem("levelScores",JSON.stringify(v));const i=JSON.parse(localStorage.getItem("chapterProgress"))||[];i.includes(c)||(i.push(c),localStorage.setItem("chapterProgress",JSON.stringify(i)))}if(parseInt(s)>50){const t=document.createElement("div");return t.className="confetti-container",document.body.appendChild(t),()=>{document.body.removeChild(t)}}},[s]);const j=()=>{n.levelIndex<2?l(`/materi/${n.babIndex}/${n.levelIndex+1}`):n.babIndex<2?l(`/materi/${n.babIndex+1}/0`):l("/main-siswa")},J=()=>{const e=parseInt(s),r=(parseInt(localStorage.getItem("totalSoal"))||5)*20,o=e/r*100;return o<=75?"Jangan Menyerah, Coba Lagi Ya!":o>75&&o<=85?"Wah Hebat, Sedikit Lagi Kamu Mencapai Skor Sempurna!":"Wah Hebatt, Pertahankan Ya!"};return a.jsxs(S.div,{className:"hasil-page",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},style:{minHeight:"100vh",width:"100%"},children:[a.jsx(S.h1,{initial:{scale:.5},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10},children:"ðŸŽ‰ Level Selesai!"}),a.jsxs("p",{children:["Bab ",n.babIndex+1,", Level ",n.levelIndex+1]}),a.jsxs(S.div,{className:"score-display",initial:{scale:.8,rotate:-5},animate:{scale:1,rotate:0},transition:{delay:.3,type:"spring"},children:[a.jsx("p",{className:"score-number",children:s}),a.jsx("p",{className:"score-label",children:"Skor Anda"})]}),a.jsx("p",{className:"score-message",children:J()}),a.jsx("div",{className:"hasil-buttons",children:a.jsx("button",{onClick:j,className:"next-level-button",children:"Level Selanjutnya âž”"})})]})}export{A as default};
